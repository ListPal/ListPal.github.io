import { useEffect, useState } from "react";
import BlurOnOutlinedIcon from "@mui/icons-material/BlurOnOutlined";
import { Typography, Stack, Grow } from "@mui/material";
import { useNavigate } from "react-router-dom";
import { checkSession } from "../../utils/rest";
import { colors, mobileWidth } from "../../utils/enum";
import "./AuthPageStyle/AuthPage.scss";

const AuthPage = ({ setUser, user, theme }) => {
  const navigate = useNavigate();
  const [showIcons, setShowIcons] = useState(true);
  const handleCheckSession = async () => {
    // Check if user is logged in already and redirect if so
    const res = await checkSession();
    if (res.status === 200) {
      setUser(res?.user);
      setTimeout(() => setShowIcons(false), 1500);
      setTimeout(() => navigate(`/containers`), 2000);
    } else {
      setTimeout(() => setShowIcons(false), 1500);
      setTimeout(() => navigate(`/login`), 2000);
    }
  };

  useEffect(() => {
    handleCheckSession();
  }, []);

  return (
    <div>
      <meta name="theme-color" content={colors[theme]?.generalColors.outerBackground} />
      <Stack
        direction={"row"}
        width={"100vw"}
        maxWidth={mobileWidth}
        justifyContent={"center"}
        mt={"40vh"}
      >
        <Grow in={showIcons}>
          <svg
            width="80px"
            height="80px"
            viewBox="0 0 1024 1024"
            className="icon"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M441 936c-121.3-7.36-233.43-93.59-233.43-231.07q0-85.27 52.84-185.15c21.77-37.43 50.7-85.12 66-146 11.13-44.34 17.88-87.16 20.39-124.86 5.24-73.71 44.29-133 94.21-144v-3.32a152.49 152.49 0 0 1 56.34-10.88c87.39 0 156 57.1 164.2 139 4.42 37.71 36.82 123.45 53.66 167.79 23.12 60.89 43.1 93.63 76 131.06q59.37 87.55 59.37 167.25c0 143.84-103.36 259.51-409.58 243.57V936z"
              fill="#FFFFFF"
            />
            <path
              d="M441 926.68a279 279 0 0 0 73.24 9.78c127.57 0 235.61-87.73 235.61-231.58q0-76.52-55.24-169.29c-21.77-37.43-54.38-101-69.66-161.87a756.52 756.52 0 0 1-20.17-124.86C599.36 167 572 103 514.24 103c-28 0-53.64-7.86-73.24 17v-18.4a152.49 152.49 0 0 1 56.34-10.88c87.39 0 156 57.1 164.2 139 4.42 37.71 36.82 123.45 53.66 167.79 23.12 60.89 43.1 93.63 76 131.06q59.37 87.55 59.37 167.25c0 143.84-103.36 259.51-409.58 243.57z"
              fill="#55AB1F"
            />
            <path
              d="M491.54 934.39c-114.55-14-216.37-98.5-216.37-229.5q0-85.27 52.84-185.15c21.77-37.43 50.7-85.12 66-146 11.13-44.34 17.88-87.16 20.39-124.86 4.59-64.55 35.11-118 76.15-137.71 35.72 19.71 53.62 73.16 57.89 137.71a756.52 756.52 0 0 0 20.17 124.86c15.29 60.89 47.89 124.44 69.66 161.87q55.24 92.77 55.24 169.29c0 130.99-89.61 215.45-201.97 229.49z"
              fill="#EBFFB9"
            />
            <path
              d="M496.61 958.31q-27.39 0-56.67-1.52l2.13-40.9c82.64 4.31 153.49-0.86 210.58-15.35 51.05-13 91.67-33.51 120.73-61.1 37.62-35.75 56.72-84.08 56.72-143.68 0-48.41-18.55-100.45-55.14-154.71-35.4-40.44-56.12-76.28-78.92-136.33C670 336.22 645.4 267.9 641.2 232v-0.35c-7.1-71-66.24-120.51-143.82-120.51-17.66 0-35.35 6.11-48.79 11.44l-15.14-38.02c16.83-6.67 39.29-14.32 63.89-14.32 47.22 0 91.61 15.48 125 43.59 33.89 28.54 55 68.88 59.56 113.61 4.27 35.86 38 124.75 52.44 162.74 21.3 56.12 39.54 87.61 72.25 124.8l0.85 1 0.72 1.06c41.74 61.55 62.9 121.69 62.9 178.75 0 71.27-23.38 129.6-69.49 173.37-62.42 59.23-164.86 89.15-304.96 89.15z"
              fill=""
            />
            <path
              d="M457.9 956.95a297 297 0 0 1-99.8-17.14 273 273 0 0 1-86.53-49.63 239.73 239.73 0 0 1-61.34-79.64c-15.36-32.37-23.15-67.92-23.15-105.65 0-60 18.58-125.47 55.22-194.72l0.4-0.72 3.48-6c20.75-35.57 46.57-79.83 60.35-134.72 10.46-41.65 17.31-83.57 19.82-121.24 6.69-94.09 63.24-165 131.55-165 34.79 0 63.41 18.22 82.77 52.68 15.61 27.8 25.1 65.54 28.2 112.18a732.8 732.8 0 0 0 19.61 121.35C604.6 433 641 499.51 655.92 525.22 694.45 590 714 650.4 714 704.89c0 37.65-6.9 72.95-20.51 104.9a232.8 232.8 0 0 1-56 79.84C590.76 933 527 956.95 457.9 956.95zM278.31 529.69C245 592.84 228 651.78 228 704.89c0 77.79 38.16 126.78 70.17 154.17C340.48 895.24 398.69 916 457.9 916c58.71 0 112.58-20 151.7-56.37 41.5-38.57 63.4-92.07 63.4-154.74 0-47-17.62-100.46-52.36-158.81l-0.11-0.18c-19.62-33.72-55-100.28-71.82-167.18A774 774 0 0 1 528 250.45v-0.23c-2.64-40-10.61-72.81-23-94.94-17.85-31.78-39.83-31.78-47.05-31.78-45.79 0-85.63 55.71-90.68 126.83-2.67 40-9.91 84.41-21 128.4-15.2 60.53-42.64 107.58-64.69 145.38z"
              fill=""
            />
            <path
              d="M317.05 688.69a123.95 123.89 0 1 0 247.9 0 123.95 123.89 0 1 0-247.9 0Z"
              fill="#FFFFFF"
            />
            <path
              d="M512.58 587.54a123.89 123.89 0 0 1-64.29 224.84 123.89 123.89 0 0 1 64.29-224.84z"
              fill="#FFB000"
            />
            <path
              d="M441 833.06c-79.64 0-144.43-64.77-144.43-144.37S361.36 544.32 441 544.32s144.43 64.77 144.43 144.37S520.64 833.06 441 833.06z m0-247.78a103.41 103.41 0 1 0 103.47 103.41A103.56 103.56 0 0 0 441 585.28z"
              fill=""
            />
          </svg>
        </Grow>
        <Grow in={showIcons} {...(showIcons ? { timeout: 500 } : {})}>
          <svg
            width="80px"
            height="80px"
            viewBox="-4.73 0 72.44 72.44"
            xmlns="http://www.w3.org/2000/svg"
            fill="#000000"
          >
            <g id="SVGRepo_bgCarrier" strokeWidth="0"></g>
            <g id="SVGRepo_tracerCarrier" strokeLinecap="round" strokeLinejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
              {" "}
              <g id="Group_11" dataname="Group 11" transform="translate(-482.502 -412.731)">
                {" "}
                <path
                  id="Path_25"
                  dataname="Path 25"
                  d="M533.566,429.163l-25.9,25.9-8.182-8.182"
                  fill="none"
                  stroke="#814dff"
                  strokeMiterlimit="10"
                  strokeWidth="3"
                ></path>{" "}
                <g id="Group_9" dataname="Group 9" opacity="0.15">
                  {" "}
                  <circle
                    id="Ellipse_17"
                    dataname="Ellipse 17"
                    cx="29.992"
                    cy="29.992"
                    r="29.992"
                    transform="translate(484.002 423.686)"
                    fill="none"
                    stroke="#000000"
                    strokeLinecap="round"
                    strokeMiterlimit="10"
                    strokeWidth="3"
                  ></circle>{" "}
                </g>{" "}
                <g id="Group_10" dataname="Group 10">
                  {" "}
                  <circle
                    id="Ellipse_18"
                    dataname="Ellipse 18"
                    cx="29.992"
                    cy="29.992"
                    r="29.992"
                    transform="translate(484.002 414.231)"
                    fill="none"
                    stroke="#000000"
                    strokeMiterlimit="10"
                    strokeWidth="3"
                  ></circle>{" "}
                </g>{" "}
              </g>{" "}
            </g>
          </svg>
        </Grow>
        <Grow in={showIcons} {...(showIcons ? { timeout: 1000 } : {})}>
          <svg
            width="80px"
            height="80px"
            viewBox="0 0 1024 1024"
            className="icon"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M321.32 935.84q-94-69.1-98.59-106.46T292 696.93q-88.06-33.32-99.85-62.93t30.58-111q-53.07-120.54-30.58-167.2t149.58-79.64q25.65-62.31 63.17-82.88t129-22.48l92 51.31q151 18.59 172.69 54t-28.42 181.7q36.09 61.55 48.4 95.52t0 80.67q-24.57 69.94-48.4 81.53t-99.1 0l-71.44 113.85L493 851.87q-41.29 69.73-70.39 84t-101.29-0.03z"
              fill="#FFFFFF"
            />
            <path
              d="M278.39 699.56a128.56 128.56 0 0 0 114.44-1.09v2.33A139.9 139.9 0 0 0 505.63 838a139.91 139.91 0 1 1-227.24-138.44z"
              fill="#DBBFFF"
            />
            <path
              d="M468 905c-53.49-15.87-110.45-40.72-143.6-81.52-21.23-26.13-47.15-69.79-66.31-102.37a140.69 140.69 0 0 1 20.28-21.5 128.56 128.56 0 0 0 114.44-1.09v2.33A139.9 139.9 0 0 0 505.63 838 139.61 139.61 0 0 1 468 905z"
              fill="#CE87FF"
            />
            <path
              d="M375.29 291.45A140 140 0 0 1 614 284q0.28 4.46 0.28 9a139.32 139.32 0 0 1-11.46 55.53 151.71 151.71 0 0 0-168.79-12.21 140.32 140.32 0 0 0-58.74-44.87z"
              fill="#E2CDFF"
            />
            <path
              d="M392.83 698.47A128.41 128.41 0 0 0 460 611a152.55 152.55 0 0 0 87.65 3.38 140 140 0 0 0 123.13 109.09 139.91 139.91 0 0 1-278-22.66q0.03-1.17 0.05-2.34z"
              fill="#DBBFFF"
            />
            <path
              d="M637.55 793.4c-42.05-18.92-75.36-45.22-83.22-81-17 4.42-12.81 11.47-31.19 11.47-24.09 0-65.31 9.42-86.87 2-12.94 7.48-24.77 14.51-35.66 21.12a139.57 139.57 0 0 1-7.79-46.14v-2.33A128.41 128.41 0 0 0 460 611a152.55 152.55 0 0 0 87.65 3.38 140 140 0 0 0 123.13 109.09 139.3 139.3 0 0 1-33.23 69.93z"
              fill="#CE87FF"
            />
            <path
              d="M460 611a128.25 128.25 0 1 1-236.28-91.24A140.07 140.07 0 0 0 381 548.34 152 152 0 0 0 460 611z"
              fill="#DBBFFF"
            />
            <path
              d="M439.63 657.73a169.12 169.12 0 0 1-33.5-38.66 155.55 155.55 0 0 1-174.75-31.74 141.39 141.39 0 0 0-16.49 43.21 128.43 128.43 0 0 1 8.79-110.79A140.07 140.07 0 0 0 381 548.34 152 152 0 0 0 460 611a127.5 127.5 0 0 1-20.37 46.73z"
              fill="#CE87FF"
            />
            <path
              d="M812.07 340.1q0.43 5.5 0.44 11.12a139.62 139.62 0 0 1-57 112.67 139.29 139.29 0 0 0-71.21-19.45 140.88 140.88 0 0 0-23.65 2 140.18 140.18 0 0 0-4.13-113.49 140 140 0 0 1 155.57 7.16zM296.46 558.48a139.91 139.91 0 0 1 120.41-240.9 140.68 140.68 0 0 1 17.19 18.69 151.52 151.52 0 0 0-53 212.07 140.66 140.66 0 0 1-84.58 10.14z"
              fill="#E2CDFF"
            />
            <path
              d="M547.62 614.38a151.67 151.67 0 0 0 111.87-167.75 139.84 139.84 0 1 1-111.87 167.75z"
              fill="#DBBFFF"
            />
            <path
              d="M789.32 491.94a141.45 141.45 0 0 0-51-0.26 151.67 151.67 0 0 1-111.83 167.75 139.4 139.4 0 0 0 31.59 62.24 140 140 0 0 1-110.46-107.29 151.67 151.67 0 0 0 111.87-167.75 140.19 140.19 0 0 1 129.84 45.31z"
              fill="#CE87FF"
            />
            <path
              d="M514 616.89a152.05 152.05 0 0 1 79.72-281.57h0.85a152.05 152.05 0 0 1-79.72 281.57z"
              fill="#E2CDFF"
            />
            <path
              d="M369.5 966c-88.43 0-160.38-71.92-160.38-160.32A160.19 160.19 0 0 1 265.05 684l10.21-8.77 12.1 5.9a108.08 108.08 0 0 0 96.15-0.91l30.36-15.52-0.56 34.09v2a119.53 119.53 0 0 0 96.28 117.12l20.9 4.1-4.91 20.72A160.42 160.42 0 0 1 369.5 966z m-86.77-242.32a119.23 119.23 0 0 0-32.65 82c0 65.81 53.57 119.32 119.42 119.32a118.14 118.14 0 0 0 74.59-26.14 120.25 120.25 0 0 0 35.45-46.8 160.81 160.81 0 0 1-105-124.64 149.54 149.54 0 0 1-40 5.48 147.54 147.54 0 0 1-51.81-9.22zM611.09 381l-20.88-16.4a129.77 129.77 0 0 0-80.82-27.86A131.09 131.09 0 0 0 444.25 354l-15.56 9-10.9-14.25a119.62 119.62 0 0 0-84.58-46.49l-20.27-1.73 1.6-20.28a160.37 160.37 0 0 1 159.88-147.61c88.43 0 160.38 71.92 160.38 160.31a159.21 159.21 0 0 1-13.15 63.67z m-101.7-85.19a170.41 170.41 0 0 1 82.12 20.78 119.91 119.91 0 0 0 2.32-23.59c0-65.81-53.57-119.35-119.42-119.35a119.48 119.48 0 0 0-116.07 91.18 160.91 160.91 0 0 1 80.8 46 172.4 172.4 0 0 1 70.25-15.05z"
              fill=""
            />
            <path
              d="M532.71 861.12c-88.43 0-160.38-71.92-160.38-160.32v-2.67l0.2-12.3 11-5.6a107.27 107.27 0 0 0 56.43-73.49l4.81-22.66 21.9 7.55a132.1 132.1 0 0 0 75.83 2.92l20.59-5.35 4.53 20.8a119.49 119.49 0 0 0 105.11 93.1l21.79 2.08-3.52 21.59a160.39 160.39 0 0 1-158.29 134.35zM413.66 710.18a119.45 119.45 0 0 0 231.91 29.73 160.81 160.81 0 0 1-112.44-101.82 173.69 173.69 0 0 1-59.14-2 147.83 147.83 0 0 1-60.33 74.09z"
              fill=""
            />
            <path
              d="M334.52 732.94c-82 0-148.72-66.69-148.72-148.66a148.56 148.56 0 0 1 20.2-74.85l13.42-23 18.78 18.87a119.6 119.6 0 0 0 134.32 24.41l16.3-7.46 9.55 15.17a131.74 131.74 0 0 0 68.27 54.21l17.12 5.9-3.76 17.72a148.75 148.75 0 0 1-145.48 117.69z m-103.1-180a107.77 107.77 0 0 0 203.71 70 173.22 173.22 0 0 1-61.58-49.62 160.92 160.92 0 0 1-142.14-20.39zM756.7 488.42l-11.7-6.91a119.29 119.29 0 0 0-60.78-16.59 120.73 120.73 0 0 0-21.18 1.87l-20.94 3.74-2.94-21.07a130.28 130.28 0 0 0-49-84.86l-12.44-9.75 6.29-14.51a119.67 119.67 0 0 0-2.3-99.76l-8.23-16.81 16-9.71a160.18 160.18 0 0 1 83.07-23.16C761 190.9 833 262.82 833 351.22a160.09 160.09 0 0 1-65.37 129.16zM684.26 424A160.5 160.5 0 0 1 753 439.42a119.92 119.92 0 0 0 39-88.2c0-65.81-53.57-119.35-119.42-119.35a119.54 119.54 0 0 0-46.34 9.32 161.21 161.21 0 0 1 0.8 101.09 170.69 170.69 0 0 1 48.8 81.9q4.22-0.18 8.42-0.18z"
              fill=""
            />
            <path
              d="M322.86 581.45c-88.43 0-160.38-71.92-160.38-160.31s71.95-160.32 160.38-160.32a159.32 159.32 0 0 1 127.46 63l14.21 18.57L444.25 354a131 131 0 0 0-45.88 183.39l12.47 19.8-21.27 9.81a159.16 159.16 0 0 1-66.71 14.45z m0-279.67c-65.85 0-119.42 53.54-119.42 119.35S257 540.49 322.86 540.49a119.56 119.56 0 0 0 29-3.53A172 172 0 0 1 403 332.6a118.5 118.5 0 0 0-80.14-30.82zM684.26 744.59a160.41 160.41 0 0 1-156.65-125.82l-4.23-19.26 19.08-5a131 131 0 0 0 98-126.81 132.84 132.84 0 0 0-1.26-18.29l-2.72-19.52 19.41-3.47a161.88 161.88 0 0 1 28.37-2.42c88.43 0 160.38 71.92 160.38 160.32S772.7 744.59 684.26 744.59zM573 627.6a119.46 119.46 0 0 0 111.3 76c65.85 0 119.42-53.54 119.42-119.35s-53.61-119.33-119.46-119.33h-2.86v2.79A172 172 0 0 1 573 627.6z"
              fill=""
            />
            <path
              d="M514.83 637.38c-95.17 0-172.6-77.4-172.6-172.53s77.43-172.53 172.6-172.53 172.6 77.4 172.6 172.53S610 637.38 514.83 637.38z m0-304.1c-72.58 0-131.64 59-131.64 131.57s59.05 131.57 131.64 131.57 131.63-59 131.63-131.57-59.04-131.57-131.63-131.57zM610.59 239.56a20.49 20.49 0 0 1-18.08-30.07c21.62-40.83 44.72-72.46 68.67-94 25.75-23.18 53.33-35.67 82-37.12a20.48 20.48 0 1 1 2.07 40.91c-40 2-79.15 38.83-116.52 109.41a20.48 20.48 0 0 1-18.14 10.87z"
              fill=""
            />
            <path
              d="M373.63 197.53q-35.59-33.6-57.74-88.85 93.33-49.93 175.2-20.13t121.27 128q-8.35 4.47-16.61 8.29a135.28 135.28 0 0 0-222.12-27.36z"
              fill="#89D66D"
            />
            <path
              d="M586.53 251.75l-9-17.5A114.8 114.8 0 0 0 389 211l-14 16-15.46-14.59c-25.79-24.35-46.88-56.69-62.69-96.11l-6.83-17 16.18-8.65c67.28-36 131.84-43.17 191.87-21.32S603 138.15 631.37 209l6.83 17-16.2 8.65a349.61 349.61 0 0 1-17.65 8.82zM342.46 118.36c9.1 19.11 19.7 35.82 31.68 50a156.11 156.11 0 0 1 171.28-20.89A164.09 164.09 0 0 0 408.69 99c-21.25 2.48-43.46 9-66.23 19.36z"
              fill=""
            />
          </svg>
        </Grow>
        <Grow in={showIcons} {...(showIcons ? { timeout: 1500 } : {})}>
          <svg
            width="80px"
            height="80px"
            viewBox="0 0 64 64"
            xmlns="http://www.w3.org/2000/svg"
            fill="#000000"
          >
            <g id="SVGRepo_bgCarrier" strokeWidth="0"></g>
            <g id="SVGRepo_tracerCarrier" strokeLinecap="round" strokeLinejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
              {" "}
              <g fill="none" fillRule="evenodd">
                {" "}
                <polyline
                  stroke="#868686"
                  strokeLinecap="round"
                  strokeWidth="4"
                  points="3.976 17.995 11.116 17.995 18.979 48.995 57.723 48.995"
                ></polyline>{" "}
                <circle cx="22" cy="55" r="3" fill="#9C4D4D"></circle>{" "}
                <circle cx="55" cy="55" r="3" fill="#9C4D4D"></circle>{" "}
                <path
                  fill="#80D25B"
                  d="M39,29 C43.418278,29 47,25.418278 47,21 C47,16.581722 39,3 39,3 C39,3 31,16.581722 31,21 C31,25.418278 34.581722,29 39,29 Z"
                ></path>{" "}
                <path
                  fill="#80D25B"
                  d="M54.5044647,39.529591 C57.2658885,39.529591 59.5044647,37.1876959 59.5044647,34.2988218 C59.5044647,31.4099477 54.5044647,22.529591 54.5044647,22.529591 C54.5044647,22.529591 49.5044647,31.4099477 49.5044647,34.2988218 C49.5044647,37.1876959 51.743041,39.529591 54.5044647,39.529591 Z"
                  transform="rotate(75 54.504 31.03)"
                ></path>{" "}
                <path
                  fill="#80D25B"
                  d="M24.5044647,39.529591 C27.2658885,39.529591 29.5044647,37.1876959 29.5044647,34.2988218 C29.5044647,31.4099477 24.5044647,22.529591 24.5044647,22.529591 C24.5044647,22.529591 19.5044647,31.4099477 19.5044647,34.2988218 C19.5044647,37.1876959 21.743041,39.529591 24.5044647,39.529591 Z"
                  transform="scale(-1 1) rotate(75 0 -.905)"
                ></path>{" "}
                <path
                  stroke="#22BA8E"
                  strokeLinecap="square"
                  strokeWidth="2"
                  d="M39,44 L39,17.9545689"
                ></path>{" "}
                <path
                  stroke="#22BA8E"
                  strokeLinecap="round"
                  strokeWidth="2"
                  d="M51,32 C44.372583,32 39,37.372583 39,44"
                ></path>{" "}
                <path
                  stroke="#22BA8E"
                  strokeLinecap="round"
                  strokeWidth="2"
                  d="M39,32 C32.372583,32 27,37.372583 27,44"
                  transform="matrix(-1 0 0 1 66 0)"
                ></path>{" "}
              </g>{" "}
            </g>
          </svg>
        </Grow>
      </Stack>
      <Grow in={showIcons}>
        {
          <Typography mt={2} color={colors[theme]?.generalColors.fontColor} fontFamily={"Urbanist"}>
            Checking Authentication...
          </Typography>
        }
      </Grow>
    </div>
  );
};

export default AuthPage;
